<!DOCTYPE html>
<html lang="en">
<head>
    <title>zKit: Scroll Helper (lib/controllers)</title>

    <meta content="text/html; charset=utf-8" http-equiv="content-type">
    <meta http-equiv="Content-Language" content="en-us" />

    <meta name="description" content="zKit, a collection of framework-agnostic components for modern web." />
    <meta name="keywords" lang="en-us" content="web components,polymer,react,react.js,angular,angular.js,ember,ember.js,vue,vue.js,meteor,meteor.js,web app,pwa,progressive,web application,modern web,framework,javascript,library,content manager,component manager,web app,content authoring,web master,static site,spa,single page application,content loader,content include,material,material design lite,mdl" />
    <meta name="author" content="G-Labs" />

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,user-scalable=no">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="icon" sizes="192x192" href="../../../images/android-desktop.png">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Material Design Lite">
    <link rel="apple-touch-icon-precomposed" href="../../../images/ios-desktop.png">

    <!-- Tile icon for Win8 (144x144 + tile color) -->
    <meta name="msapplication-TileImage" content="../../../images/touch/ms-touch-icon-144x144-precomposed.png">
    <meta name="msapplication-TileColor" content="#3372DF">

    <link rel="shortcut icon" href="../../../images/favicon.png">

    <meta name="google-site-verification" content="nkLa1C34WpSqkoDdFA0-rdb_tz412T9bAMZK7Uzu4y4" />
    <!-- SEO: If your mobile URL is different from the desktop URL, add a canonical link to the desktop page https://developers.google.com/webmasters/smartphone-sites/feature-phones -->
    <!--
    <link rel="canonical" href="https://www.example.com/">
    -->

    <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="../../../css/flex-layout-attribute.min.css">

    <!-- zUIx library  -->
    <script src="/js/zuix.js"></script>


<script>
    // use 'var' or 'window.' for options (global object)
</script>

</head>

<body layout="column top-center">

<header class="header-cover animated fadeIn">
    <div self="size-large center" layout="rows center-left">
        <div><h1 data-ui-field="page_title" class="animated fadeInLeft">Scroll Helper</h1></div>
        <div self="center-right"><a href="../../../"><i class="material-icons animated fadeInRight">extension</i></a></div>
    </div>
</header>





<main self="size-x1 stretch" class="main-content animated fadeIn" layout="columns top-stretch">

    

<div self="size-large center">

    <p>
        To-do...
    </p>
    <div data-ui-load="/lib/controllers/scroll_helper"
         data-ui-options="scroll_opts"
         self="center" class="no-select scroll-box">

        <div style="min-height: 120vh;background-color: #5ec8d5">
            &nbsp;
        </div>

        <img class="watch parallax" data-translate="-520" data-stop="0.01" src="../../..//images/parallax/layer07_Sky.png">
        <img class="watch parallax" data-translate="-400" data-stop="0.01" src="../../..//images/parallax/layer06_Rocks.png">
        <img class="watch parallax" data-translate="-280" data-stop="0.01" src="../../..//images/parallax/layer05_Hills.png">
        <img class="watch parallax" data-translate="-180" data-stop="0.01" src="../../..//images/parallax/layer04_Clouds.png">
        <img class="watch parallax" data-translate="-120" data-stop="0.01" src="../../..//images/parallax/layer03_Hills_Castle.png">
        <img class="watch parallax" data-translate="-60" data-stop="0.01" src="../../..//images/parallax/layer02_Trees_rocks.png">
        <img class="watch parallax" data-translate="0" data-stop="0.01" src="../../..//images/parallax/layer01_Ground.png">

        <img class="watch" src="../../..//images/alice-falling.png" style="max-width:240px">

        <div style="height: 30vh;" layout="column center-center">&nbsp;</div>

        <div style="height: 70vh;" layout="column center-center">
            <h2 align="center">scroll more</h2>
        </div>

        <img class="watch" src="../../..//images/alice-falling.png" style="max-width:240px">

        <div style="height: 70vh;" layout="column center-center">
            <i class="material-icons">arrow_upward</i>
            <h2 align="center">scroll up</h2>
        </div>

    </div>

</div>
<script>
    var scroll_opts = {
        ready: function() {
            this.on('scroll:change', function(e, data) {
                // console.log(data);
            }).watch('.watch', function(el, data) {
                el = zuix.$(el);
                if (el.hasClass('animated'))
                    return;
                if (data.event === 'enter') {
                    //el.animateCss(data.frame.dy < 0.5 ? 'fadeInDown' : 'fadeInUp')
                    //    .visibility('visible');
                } else if (data.event === 'exit') {
                    //el.animateCss(data.frame.dy < 0.5 ? 'fadeOutUp' : 'fadeOutDown', function() {
                    //    this.visibility('hidden');
                    //});
                } else if (data.event === 'scroll') {

                    if (el.attr('data-translate') != null) {

                        const translate = parseFloat(el.attr('data-translate'));
                        const dy = data.frame.dy;

                        if (el.attr('data-stop') != null) {
                            const stop = parseFloat(el.attr('data-stop'));
                            if (dy < stop) return;
                        }

                        //let scale = 0.15+dy;
                        //if (scale < 1) scale = 1;
                        //el.css('transform', 'scale('+scale+') translateY('+ (-300+(-40*(translate * dy))) + 'px)');

                        el.css('transform', 'translateY('+ (-280+((translate * dy))) + 'px)');
                        el.css('opacity', 1.65-dy);
                        //if (el.attr('data-opacity') != null) {
                        //    const opacity = parseFloat(el.attr('data-opacity'));
                        //    el.css('opacity', opacity - Math.abs(dy*2));
                        //}
                        //if (dy > 0.9)
                        //    el.css('opacity', 1-((1-dy)*10));

                    } else {

                        if (data.frame.dy < 0.2)
                            el.css('opacity', data.frame.dy * 5);
                        else if (data.frame.dy > 0.8)
                            el.css('opacity', (1 - data.frame.dy) * 5);
                        else if (parseFloat(el.css('opacity')) !== 1)
                            el.css('opacity', 1);

                        if (data.frame.dy >= -0.5 && data.frame.dy <= 1.5) {
                            el.css('transform', 'rotate(' + (360 * data.frame.dy) + 'deg)');
                        }

                    }
                }
            }).scrollEnd();
        }
    };
</script>
<style>
    .scroll-box {
        position: relative;
        max-width: 100vh;
        height: 80vh;
        overflow-x: hidden;
        overflow-y: scroll;
        margin: 0; /*32px auto 16px;*/
        border-radius: 8px;
        border: solid 2px rgba(255,255,255,0.5);
        background: #89675b;
        color: white;
        font-size: 160%;
        line-height: 120%;
        font-family: Helvetica, sans-serif;
        -webkit-box-shadow: 0 0 40px -8px rgba(0,0,0,0.75);
        -moz-box-shadow: 0 0 40px -8px rgba(0,0,0,0.75);
        box-shadow: 0 0 40px -8px rgba(0,0,0,0.75);
    }
    .scroll-box i {
        font-size: 300%;
        display: table;
        margin: auto;
    }
    .watch {
        -webkit-transition: opacity 0.2s ease;
        -moz-transition: opacity 0.2s ease;
        -ms-transition: opacity 0.2s ease;
        -o-transition: opacity 0.2s ease;
        transition: opacity 0.2s ease;
        display: table;
        margin: auto;
    }
    .parallax {
        position: absolute;
        width: 100%;
        transform: translateY(0);
    }
    [data-opacity].parallax {
        opacity: 0;
    }
</style>

<div self="size-large center" layout="columns top-stretch">

    <h2>Usage</h2>
<h3>1. Include zUIx library</h3>
<p>Add the following line, preferably inside the <code>head</code> section of the <code>HTML</code> page:</p>

<pre><code class="html">&lt;script src="//genielabs.github.io/zuix/js/zuix.min.js"&gt;&lt;/script&gt;</code></pre>

<p>this is the library that does all the magic : )</p>


    <h3>2. Load the scroll helper on the target element</h3>
    <p>Add the <code>data-ui-load</code> attribute to the element you want to detect gesture on</p>
<pre><code class="html">&lt;div data-ui-load="@lib/controllers/scroll_helper"
     data-ui-options="scroll_options"&gt;
    <!-- scroll container -->
&lt;/div&gt;
<script>
var scroll_options = {
    ready: function() {
        // register event callbacks
        // TODO: ....
    }
}
</script></code></pre>
    <p>
        `// TODO: ...`
    </p>
    <pre><code class="js">// TODO: ...</code></pre>

    <h2>Option attributes</h2>
    <ul>
        <li>
            <code class="option">data-ui-context</code>
            <small>optional</small><br>
            identifier name to be used to reference this component from JavaScript.
        </li>
    </ul>


    <h2>Source code</h2>
    <p>
        Source code is available in the <code>lib/controllers</code> folder of <a href="//github.com/genielabs/zkit">zKit</a> repository.
    </p>
    <div self="size-large">
        <ul class="list">
            <li><a href="//github.com/genielabs/zkit/blob/master/source/lib/controllers/scroll_helper.js">scroll_helper.js</a></li>
        </ul>
    </div>

</div>



</main>

<footer>
    <div layout="rows center-justify" class="footer-block">
        <div self="size-x1 center-right"><a href="../../../"><strong>zKit</strong></a> <small>components for modern web</small></div>
        <div self="center-right">made with <strong><a href="http://zuix.it">zUIx</a></strong></div>
    </div>
</footer>






<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="//www.googletagmanager.com/gtag/js?id=UA-116384214-1"></script>
<script>
    // Google Analytics
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'UA-116384214-1');
</script>

<!-- MDL -->
<link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
<script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>


<link rel="stylesheet" href="../../..//css/docs.css">

<!-- Common JS scripts -->
<link rel="stylesheet" href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.12.0/build/styles/androidstudio.min.css">
<script>
    // Escape HTML in 'code' blocks
    document.querySelectorAll("code").forEach(function(element) {
        element.innerHTML = element.innerHTML/*.replace(/&/g, "&amp;")*/.replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
    });
    // AnimateCSS
    zuix.using('component', '@lib/extensions/animate_css');
    // Code highlighting
    zuix.using('script', '//cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.12.0/build/highlight.min.js', function () {
        zuix.$('pre code').each(function(i, block) {
            hljs.highlightBlock(block);
        });
    });
</script>

</body>
</html>
